console.log('ðŸš€ Starting test: TestCase_1771165571151');

  // Step 1: Navigate to page
  console.log('ðŸ“‹ Step 1: Navigate to https://automationexercise.com/');
  await page.goto('https://automationexercise.com/', { waitUntil: 'domcontentloaded', timeout: 30000 });
  console.log('âœ… Page loaded');

  // Step 2: click 'Women'
  console.log('ðŸ“‹ Step 2: click \'Women\'');
  const btn_women_0 = page.locator('button, a, [role="button"]').filter({ hasText: 'Women' }).first();
  await btn_women_0.waitFor({ state: 'visible', timeout: 10000 });
  await btn_women_0.click();
  console.log('âœ… Women clicked');
  await page.waitForTimeout(1000);

  // Step 3: click Dress
  console.log('ðŸ“‹ Step 3: click Dress');
  const btn_dress_1 = page.locator('button, a, [role="button"]').filter({ hasText: 'Dress' }).first();
  await btn_dress_1.waitFor({ state: 'visible', timeout: 10000 });
  await btn_dress_1.click();
  console.log('âœ… Dress clicked');
  await page.waitForTimeout(1000);

  // Step 4: verify 'WOMEN - Dress PRODUCTS'
  console.log('ðŸ“‹ Step 4: verify \'WOMEN - Dress PRODUCTS\'');
  // Verify: WOMEN - Dress PRODUCTS
  let verificationPassed_2 = false;
  for (let i = 0; i < 3; i++) {
    try {
      const bodyText = await page.locator('body').textContent();
      if (bodyText) {
        // Remove all spaces and convert to lowercase for flexible matching (handles extra spaces, line breaks, case variations, etc.)
        const normalizedBodyText = bodyText.replace(/\s+/g, '').toLowerCase();
        if (normalizedBodyText.includes('women-dressproducts')) {
          verificationPassed_2 = true;
          break;
        }
        // Debug: Log a sample of the page text if not found on last attempt
        if (i === 2) {
          const sampleText = normalizedBodyText.substring(0, 500);
          console.log('ðŸ” DEBUG: Looking for "women-dressproducts" in page text');
          console.log('ðŸ” DEBUG: Page text sample (first 500 chars): ' + sampleText);
        }
      }
    } catch (e) {
      // Continue retrying
    }
    await page.waitForTimeout(1000);
  }
  if (!verificationPassed_2) {
    throw new Error('Page does not contain expected text: WOMEN - Dress PRODUCTS');
  }
  console.log('âœ… Verified: WOMEN - Dress PRODUCTS');

  // Step 5: click Women
  console.log('ðŸ“‹ Step 5: click Women');
  const btn_women_2 = page.locator('button, a, [role="button"]').filter({ hasText: 'Women' }).first();
  await btn_women_2.waitFor({ state: 'visible', timeout: 10000 });
  await btn_women_2.click();
  console.log('âœ… Women clicked');
  await page.waitForTimeout(1000);

  // Step 6: click KIDS
  console.log('ðŸ“‹ Step 6: click KIDS');
  const btn_kids_3 = page.locator('button, a, [role="button"]').filter({ hasText: 'KIDS' }).first();
  await btn_kids_3.waitFor({ state: 'visible', timeout: 10000 });
  await btn_kids_3.click();
  console.log('âœ… KIDS clicked');
  await page.waitForTimeout(1000);

  // Step 7: click Tops & Shirts
  console.log('ðŸ“‹ Step 7: click Tops & Shirts');
  const btn_tops_shirt_4 = page.locator('button, a, [role="button"]').filter({ hasText: 'Tops & Shirts' }).first();
  await btn_tops_shirt_4.waitFor({ state: 'visible', timeout: 10000 });
  await btn_tops_shirt_4.click();
  console.log('âœ… Tops & Shirts clicked');
  await page.waitForTimeout(1000);

  // Step 8: verify 'Kids - Tops & Shirts Products'
  console.log('ðŸ“‹ Step 8: verify \'Kids - Tops & Shirts Products\'');
  // Verify: Kids - Tops & Shirts Products
  let verificationPassed_5 = false;
  for (let i = 0; i < 3; i++) {
    try {
      const bodyText = await page.locator('body').textContent();
      if (bodyText) {
        // Remove all spaces and convert to lowercase for flexible matching (handles extra spaces, line breaks, case variations, etc.)
        const normalizedBodyText = bodyText.replace(/\s+/g, '').toLowerCase();
        if (normalizedBodyText.includes('kids-tops&shirtsproducts')) {
          verificationPassed_5 = true;
          break;
        }
        // Debug: Log a sample of the page text if not found on last attempt
        if (i === 2) {
          const sampleText = normalizedBodyText.substring(0, 500);
          console.log('ðŸ” DEBUG: Looking for "kids-tops&shirtsproducts" in page text');
          console.log('ðŸ” DEBUG: Page text sample (first 500 chars): ' + sampleText);
        }
      }
    } catch (e) {
      // Continue retrying
    }
    await page.waitForTimeout(1000);
  }
  if (!verificationPassed_5) {
    throw new Error('Page does not contain expected text: Kids - Tops & Shirts Products');
  }
  console.log('âœ… Verified: Kids - Tops & Shirts Products');

  // Take final screenshot
  await page.screenshot({ path: 'test-results/TestCase_1771165571151-final.png', fullPage: true });
  console.log('âœ… Test completed successfully');